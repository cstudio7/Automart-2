{"version":3,"sources":["../../../SERVER/usingDB/controller/flagController.js"],"names":["Flag","create","req","res","text","values","body","car_id","reason","description","Date","db","query","rows","flag","status","send","error"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;AAEA,IAAMA,IAAI,GAAG;AACX;;;;;;AAMMC,EAAAA,MAPK;AAAA;AAAA;AAAA,6CAOEC,GAPF,EAOOC,GAPP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAQHC,cAAAA,IARG;AAYHC,cAAAA,MAZG,GAYM,CACb,oBADa,EAEbH,GAAG,CAACI,IAAJ,CAASC,MAFI,EAGbL,GAAG,CAACI,IAAJ,CAASE,MAHI,EAIbN,GAAG,CAACI,IAAJ,CAASG,WAJI,EAKb,wBAAO,IAAIC,IAAJ,EAAP,CALa,EAMb,wBAAO,IAAIA,IAAJ,EAAP,CANa,CAZN;AAAA;AAAA;AAAA,qBAsBgBC,eAAGC,KAAH,CAASR,IAAT,EAAeC,MAAf,CAtBhB;;AAAA;AAAA;AAsBCQ,cAAAA,IAtBD,QAsBCA,IAtBD;AAuBDC,cAAAA,IAvBC,GAuBMD,IAAI,CAAC,CAAD,CAvBV;AAAA,+CAwBAV,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACD,gBAAAA,MAAM,EAAE,GAAT;AAAcD,gBAAAA,IAAI,EAAJA;AAAd,eAArB,CAxBA;;AAAA;AAAA;AAAA;AAAA,+CA0BAX,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACD,gBAAAA,MAAM,EAAE,GAAT;AAAcE,gBAAAA,KAAK;AAAnB,eAArB,CA1BA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAb;eAgCejB,I","sourcesContent":["import \"@babel/polyfill\";\r\nimport moment from 'moment';\r\nimport uuidv4 from 'uuid/v4';\r\nimport db from '../db';\r\n\r\nconst Flag = {\r\n  /**\r\n   * Create A Flag\r\n   * @param {object} req \r\n   * @param {object} res\r\n   * @returns {object} flag object \r\n   */\r\n  async create(req, res) {\r\n    const text = `INSERT INTO\r\n      flags(id, car_id, reason, description, created_on, modified_date)\r\n      VALUES($1, $2, $3, $4, $5, $6)\r\n      returning *`;\r\n    const values = [\r\n      uuidv4(),\r\n      req.body.car_id,\r\n      req.body.reason,\r\n      req.body.description,\r\n      moment(new Date()),\r\n      moment(new Date())\r\n    ];\r\n\r\n    try {\r\n      const { rows } = await db.query(text, values);\r\n      const flag = rows[0];\r\n      return res.status(201).send({status: 201, flag});\r\n    } catch(error) {\r\n      return res.status(400).send({status: 400, error});\r\n    }\r\n  },\r\n  \r\n}\r\n\r\nexport default Flag;\r\n"],"file":"flagController.js"}