{"version":3,"sources":["../../../SERVER/usingDB/controller/carController.js"],"names":["Car","create","req","res","text","values","body","manufacturer","owner","model","price","state","status","body_type","Date","db","query","rows","data","send","error","getOne","params","id","carId","car","getUpdatePrice","findOneQuery","updateOneQuery","response","updatedAd","err","getAll","findAllQuery","min_price","console","log","max_price","carRange","message","getUpdateStatus","modifiedAdStatus","deleteQuery"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;AAEA,IAAMA,GAAG,GAAG;AAEV;;;;;;AAMMC,EAAAA,MARI;AAAA;AAAA;AAAA,6CAQGC,GARH,EAQQC,GARR;AAAA;;AAAA;AAAA;AAAA;AAAA;AASFC,cAAAA,IATE;AAaFC,cAAAA,MAbE,GAaO,CACb,oBADa,EAEbH,GAAG,CAACI,IAAJ,CAASC,YAFI,EAGbL,GAAG,CAACI,IAAJ,CAASE,KAHI,EAIbN,GAAG,CAACI,IAAJ,CAASG,KAJI,EAKbP,GAAG,CAACI,IAAJ,CAASI,KALI,EAMbR,GAAG,CAACI,IAAJ,CAASK,KANI,EAObT,GAAG,CAACI,IAAJ,CAASM,MAPI,EAQbV,GAAG,CAACI,IAAJ,CAASO,SARI,EASb,wBAAO,IAAIC,IAAJ,EAAP,CATa,EAUb,wBAAO,IAAIA,IAAJ,EAAP,CAVa,CAbP;AAAA;AAAA;AAAA,qBA0BiBC,eAAGC,KAAH,CAASZ,IAAT,EAAeC,MAAf,CA1BjB;;AAAA;AAAA;AA0BEY,cAAAA,IA1BF,QA0BEA,IA1BF;AA2BAC,cAAAA,IA3BA,GA2BOD,IAAI,CAAC,CAAD,CA3BX;AAAA,+CA4BCd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeM,gBAAAA,IAAI,EAAJA;AAAf,eAArB,CA5BD;;AAAA;AAAA;AAAA;AAAA,+CA8BCf,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK;AAApB,eAArB,CA9BD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAkCV;;;;;;AAMMC,EAAAA,MAxCI;AAAA;AAAA;AAAA,8CAwCGnB,GAxCH,EAwCQC,GAxCR;AAAA;;AAAA;AAAA;AAAA;AAAA;AAyCFC,cAAAA,IAzCE,GAyCK,kCAzCL;AAAA;AA2CNF,cAAAA,GAAG,CAACoB,MAAJ,CAAWC,EAAX,GAAgBrB,GAAG,CAACoB,MAAJ,CAAWE,KAA3B;AA3CM;AAAA,qBA4CiBT,eAAGC,KAAH,CAASZ,IAAT,EAAe,CAACF,GAAG,CAACoB,MAAJ,CAAWC,EAAZ,CAAf,CA5CjB;;AAAA;AAAA;AA4CEN,cAAAA,IA5CF,SA4CEA,IA5CF;;AAAA,kBA6CDA,IAAI,CAAC,CAAD,CA7CH;AAAA;AAAA;AAAA;;AAAA,gDA8CGd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK,EAAE;AAAtB,eAArB,CA9CH;;AAAA;AAgDAK,cAAAA,GAhDA,GAgDMR,IAAI,CAAC,CAAD,CAhDV;AAAA,gDAiDCd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAea,gBAAAA,GAAG,EAAHA;AAAf,eAArB,CAjDD;;AAAA;AAAA;AAAA;AAAA,gDAmDCtB,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK;AAApB,eAArB,CAnDD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAsDV;;;;;;AAMMM,EAAAA,cA5DI;AAAA;AAAA;AAAA,8CA4DWxB,GA5DX,EA4DgBC,GA5DhB;AAAA;;AAAA;AAAA;AAAA;AAAA;AA6DFwB,cAAAA,YA7DE,GA6Da,gCA7Db;AA8DFC,cAAAA,cA9DE;AAAA;AAkEN1B,cAAAA,GAAG,CAACoB,MAAJ,CAAWC,EAAX,GAAgBrB,GAAG,CAACoB,MAAJ,CAAWE,KAA3B;AAlEM;AAAA,qBAmEiBT,eAAGC,KAAH,CAASW,YAAT,EAAuB,CAACzB,GAAG,CAACoB,MAAJ,CAAWC,EAAZ,CAAvB,CAnEjB;;AAAA;AAAA;AAmEEN,cAAAA,IAnEF,SAmEEA,IAnEF;;AAAA,kBAqEDA,IAAI,CAAC,CAAD,CArEH;AAAA;AAAA;AAAA;;AAAA,gDAsEGd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK,EAAE;AAAtB,eAArB,CAtEH;;AAAA;AAwEAf,cAAAA,MAxEA,GAwES,CACbH,GAAG,CAACI,IAAJ,CAASI,KADI,EAEb,wBAAO,IAAII,IAAJ,EAAP,CAFa,EAGbZ,GAAG,CAACoB,MAAJ,CAAWC,EAHE,CAxET;AAAA;AAAA,qBA6EiBR,eAAGC,KAAH,CAASY,cAAT,EAAyBvB,MAAzB,CA7EjB;;AAAA;AA6EAwB,cAAAA,QA7EA;AA8EAC,cAAAA,SA9EA,GA8EYD,QAAQ,CAACZ,IAAT,CAAc,CAAd,CA9EZ;AAAA,gDA+ECd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAekB,gBAAAA,SAAS,EAATA;AAAf,eAArB,CA/ED;;AAAA;AAAA;AAAA;AAAA,gDAiFC3B,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAemB,gBAAAA,GAAG;AAAlB,eAArB,CAjFD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAqFV;;;;;;AAMMC,EAAAA,MA3FI;AAAA;AAAA;AAAA,8CA2FG9B,GA3FH,EA2FQC,GA3FR;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBA6FJD,GAAG,CAACc,KAAJ,CAAUJ,MAAV,KAAqB,WA7FjB;AAAA;AAAA;AAAA;;AAAA,oBAgGFV,GAAG,CAACc,KAAJ,CAAUL,KAAV,KAAoB,KAhGlB;AAAA;AAAA;AAAA;;AAkGEsB,cAAAA,cAlGF,GAkGiB,iEAlGjB;AAAA;AAAA;AAAA,qBAoGqBlB,eAAGC,KAAH,CAASiB,cAAT,CApGrB;;AAAA;AAAA;AAoGMhB,cAAAA,IApGN,SAoGMA,IApGN;AAAA,gDAqGKd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEF,gBAAAA,IAAI,EAAJA;AAAF,eAArB,CArGL;;AAAA;AAAA;AAAA;AAAA,gDAuGKd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK;AAApB,eAArB,CAvGL;;AAAA;AAAA,oBA4GFlB,GAAG,CAACc,KAAJ,CAAUL,KAAV,KAAoB,MA5GlB;AAAA;AAAA;AAAA;;AA8GEsB,cAAAA,cA9GF,GA8GiB,kEA9GjB;AAAA;AAAA;AAAA,qBAgHqBlB,eAAGC,KAAH,CAASiB,cAAT,CAhHrB;;AAAA;AAAA;AAgHMhB,cAAAA,KAhHN,SAgHMA,IAhHN;AAAA,gDAiHKd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEF,gBAAAA,IAAI,EAAJA;AAAF,eAArB,CAjHL;;AAAA;AAAA;AAAA;AAAA,gDAmHKd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK;AAApB,eAArB,CAnHL;;AAAA;AAAA,mBAwHFlB,GAAG,CAACc,KAAJ,CAAUT,YAxHR;AAAA;AAAA;AAAA;;AA0HE0B,cAAAA,cA1HF,+EA0HsF/B,GAAG,CAACc,KAAJ,CAAUT,YA1HhG;AAAA;AAAA;AAAA,qBA4HqBQ,eAAGC,KAAH,CAASiB,cAAT,CA5HrB;;AAAA;AAAA;AA4HMhB,cAAAA,MA5HN,SA4HMA,IA5HN;AAAA,gDA6HKd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeK,gBAAAA,IAAI,EAAJA;AAAf,eAArB,CA7HL;;AAAA;AAAA;AAAA;AAAA,gDA+HKd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK;AAApB,eAArB,CA/HL;;AAAA;AAAA,mBAoIFlB,GAAG,CAACc,KAAJ,CAAUkB,SApIR;AAAA;AAAA;AAAA;;AAqIJC,cAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACMH,cAAAA,cAtIF,8EAsIqF/B,GAAG,CAACc,KAAJ,CAAUkB,SAtI/F,oBAsIkHhC,GAAG,CAACc,KAAJ,CAAUqB,SAtI5H,SAuIJ;;AAvII;AAAA,qBAwIqBtB,eAAGC,KAAH,CAASiB,cAAT,CAxIrB;;AAAA;AAAA;AAwIMhB,cAAAA,MAxIN,SAwIMA,IAxIN;AAyIIqB,cAAAA,QAzIJ,GAyIerB,MAzIf;AAAA,gDA0IKd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAe0B,gBAAAA,QAAQ,EAARA;AAAf,eAArB,CA1IL;;AAAA;AAgJN;AACML,cAAAA,aAjJA,GAiJe,+CAjJf;AAAA;AAAA;AAAA,qBAmJmBlB,eAAGC,KAAH,CAASiB,aAAT,CAnJnB;;AAAA;AAAA;AAmJIhB,cAAAA,MAnJJ,SAmJIA,IAnJJ;;AAAA,oBAoJDA,MAAI,KAAK,EApJR;AAAA;AAAA;AAAA;;AAAA,gDAqJKd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAe2B,gBAAAA,OAAO,EAAE;AAAxB,eAArB,CArJL;;AAAA;AAAA,gDAuJGpC,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeK,gBAAAA,IAAI,EAAJA;AAAf,eAArB,CAvJH;;AAAA;AAAA;AAAA;AAAA,gDAyJGd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK;AAApB,eAArB,CAzJH;;AAAA;AAAA,mBA8JJlB,GAAG,CAACc,KAAJ,CAAUH,SA9JN;AAAA;AAAA;AAAA;;AAgKAoB,cAAAA,cAhKA,oDAgKyD/B,GAAG,CAACc,KAAJ,CAAUH,SAhKnE;AAAA;AAAA;AAAA,qBAkKmBE,eAAGC,KAAH,CAASiB,cAAT,CAlKnB;;AAAA;AAAA;AAkKIhB,cAAAA,MAlKJ,SAkKIA,IAlKJ;AAAA,gDAmKGd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAACP,gBAAAA,MAAM,EAAE,GAAT;AAAcK,gBAAAA,IAAI,EAAJA;AAAd,eAArB,CAnKH;;AAAA;AAAA;AAAA;AAAA,gDAqKGd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK,+BAAwBlB,GAAG,CAACc,KAAJ,CAAUH,SAAlC;AAApB,eAArB,CArKH;;AAAA;AAyKFoB,cAAAA,YAzKE,GAyKa,oBAzKb;AAAA;AAAA;AAAA,qBA2KiBlB,eAAGC,KAAH,CAASiB,YAAT,CA3KjB;;AAAA;AAAA;AA2KEhB,cAAAA,MA3KF,UA2KEA,IA3KF;AAAA,gDA4KCd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeK,gBAAAA,IAAI,EAAJA;AAAf,eAArB,CA5KD;;AAAA;AAAA;AAAA;AAAA,gDA8KCd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK;AAApB,eAArB,CA9KD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAiLV;;;;;;AAMMoB,EAAAA,eAvLI;AAAA;AAAA;AAAA,8CAuLYtC,GAvLZ,EAuLiBC,GAvLjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAwLFwB,cAAAA,YAxLE,GAwLa,gCAxLb;AAyLFC,cAAAA,cAzLE;AAAA;AA6LN1B,cAAAA,GAAG,CAACoB,MAAJ,CAAWC,EAAX,GAAgBrB,GAAG,CAACoB,MAAJ,CAAWE,KAA3B;AA7LM;AAAA,qBA8LiBT,eAAGC,KAAH,CAASW,YAAT,EAAuB,CAACzB,GAAG,CAACoB,MAAJ,CAAWC,EAAZ,CAAvB,CA9LjB;;AAAA;AAAA;AA8LEN,cAAAA,IA9LF,UA8LEA,IA9LF;;AAAA,kBA+LDA,IAAI,CAAC,CAAD,CA/LH;AAAA;AAAA;AAAA;;AAAA,gDAgMGd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK,EAAE;AAAtB,eAArB,CAhMH;;AAAA;AAAA,oBAkMGH,IAAI,CAAC,CAAD,CAAJ,CAAQL,MAAR,KAAmB,MAlMtB;AAAA;AAAA;AAAA;;AAAA,gDAmMGT,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK,6CAAsCH,IAAI,CAAC,CAAD,CAAJ,CAAQL,MAA9C;AAApB,eAArB,CAnMH;;AAAA;AAsMAP,cAAAA,MAtMA,GAsMS,CACbH,GAAG,CAACI,IAAJ,CAASM,MADI,EAEb,wBAAO,IAAIE,IAAJ,EAAP,CAFa,EAGbZ,GAAG,CAACoB,MAAJ,CAAWC,EAHE,CAtMT;AAAA;AAAA,qBA2MiBR,eAAGC,KAAH,CAASY,cAAT,EAAyBvB,MAAzB,CA3MjB;;AAAA;AA2MAwB,cAAAA,QA3MA;AA4MAY,cAAAA,gBA5MA,GA4MmBZ,QAAQ,CAACZ,IAAT,CAAc,CAAd,CA5MnB;AAAA,gDA6MCd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAe6B,gBAAAA,gBAAgB,EAAhBA;AAAf,eAArB,CA7MD;;AAAA;AAAA;AAAA;AAAA,gDA+MCtC,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAemB,gBAAAA,GAAG;AAAlB,eAArB,CA/MD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAkNV;;;;;;AAlNU;AAAA;AAAA;AAAA,8CAwNG7B,GAxNH,EAwNQC,GAxNR;AAAA;;AAAA;AAAA;AAAA;AAAA;AAyNFuC,cAAAA,WAzNE,GAyNY,0CAzNZ;AAAA;AA2NNxC,cAAAA,GAAG,CAACoB,MAAJ,CAAWC,EAAX,GAAgBrB,GAAG,CAACoB,MAAJ,CAAWE,KAA3B;AA3NM;AAAA,qBA4NiBT,eAAGC,KAAH,CAAS0B,WAAT,EAAsB,CAACxC,GAAG,CAACoB,MAAJ,CAAWC,EAAZ,CAAtB,CA5NjB;;AAAA;AAAA;AA4NEN,cAAAA,IA5NF,UA4NEA,IA5NF;;AAAA,kBA8NDA,IAAI,CAAC,CAAD,CA9NH;AAAA;AAAA;AAAA;;AAAA,gDA+NGd,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAACP,gBAAAA,MAAM,EAAE,GAAT;AAAcQ,gBAAAA,KAAK,EAAE;AAArB,eAArB,CA/NH;;AAAA;AAAA,gDAkOCjB,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAACP,gBAAAA,MAAM,EAAE,GAAT;AAAc2B,gBAAAA,OAAO,EAAE;AAAvB,eAArB,CAlOD;;AAAA;AAAA;AAAA;AAAA,gDAoOEpC,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AAAEP,gBAAAA,MAAM,EAAE,GAAV;AAAeQ,gBAAAA,KAAK;AAApB,eAArB,CApOF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAZ;eAyOepB,G","sourcesContent":["import \"@babel/polyfill\";\r\nimport moment from 'moment';\r\nimport uuidv4 from 'uuid/v4';\r\nimport db from '../db';\r\n\r\nconst Car = {\r\n\r\n  /**\r\n * Create A Car Ad\r\n * @param {object} req \r\n * @param {object} res\r\n * @returns {object} car object \r\n */\r\n  async create(req, res) {\r\n    const text = `INSERT INTO\r\n    cars(id, manufacturer, owner, model, price, state, status, body_type, created_on, modified_date)\r\n    VALUES($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)\r\n      returning *`;\r\n    const values = [\r\n      uuidv4(),\r\n      req.body.manufacturer,\r\n      req.body.owner,\r\n      req.body.model,\r\n      req.body.price,\r\n      req.body.state,\r\n      req.body.status,\r\n      req.body.body_type,\r\n      moment(new Date()),\r\n      moment(new Date())\r\n    ];\r\n    try {\r\n      const { rows } = await db.query(text, values);\r\n      const data = rows[0];\r\n      return res.status(201).send({ status: 201, data });\r\n    } catch (error) {\r\n      return res.status(400).send({ status: 400, error });\r\n    }\r\n  },\r\n\r\n  /**\r\n * View a specific Car\r\n * @param {object} req \r\n * @param {object} res\r\n * @returns {object} car object\r\n */\r\n  async getOne(req, res) {\r\n    const text = 'SELECT * FROM cars WHERE id = $1';\r\n    try {\r\n      req.params.id = req.params.carId;\r\n      const { rows } = await db.query(text, [req.params.id]);\r\n      if (!rows[0]) {\r\n        return res.status(404).send({ status: 404, error: 'car not found' });\r\n      }\r\n      const car = rows[0];\r\n      return res.status(200).send({ status: 200, car });\r\n    } catch (error) {\r\n      return res.status(400).send({ status: 400, error })\r\n    }\r\n  },\r\n  /**\r\n  * Update price of Car Ad\r\n  * @param {object} req \r\n  * @param {object} res \r\n  * @returns {object} update price of Car Ad\r\n  */\r\n  async getUpdatePrice(req, res) {\r\n    const findOneQuery = 'SELECT * FROM cars WHERE id=$1';\r\n    const updateOneQuery = `UPDATE cars\r\n      SET price=$1, modified_date=$2\r\n      WHERE id=$3 returning *`;\r\n    try {\r\n      req.params.id = req.params.carId;\r\n      const { rows } = await db.query(findOneQuery, [req.params.id]);\r\n      \r\n      if (!rows[0]) {\r\n        return res.status(404).send({ status: 404, error: 'car not found' });\r\n      }\r\n      const values = [\r\n        req.body.price,\r\n        moment(new Date()),\r\n        req.params.id\r\n      ];\r\n      const response = await db.query(updateOneQuery, values);\r\n      const updatedAd = response.rows[0];\r\n      return res.status(200).send({ status: 200, updatedAd });\r\n    } catch (err) {\r\n      return res.status(400).send({ status: 400, err });\r\n    }\r\n  },\r\n\r\n  /**\r\n * Filter Cars by input query\r\n * @param {object} req \r\n * @param {object} res \r\n * @returns {object} cars array\r\n */\r\n  async getAll(req, res) {\r\n\r\n    if (req.query.status === 'available') {\r\n\r\n      //return all new available cars\r\n      if (req.query.state === 'new') {\r\n\r\n        const findAllQuery = \"SELECT * FROM cars WHERE status = 'available' AND state = 'new'\";\r\n        try {\r\n          const { rows } = await db.query(findAllQuery);\r\n          return res.status(200).send({ rows });\r\n        } catch (error) {\r\n          return res.status(400).send({ status: 400, error });\r\n        }\r\n\r\n      }\r\n      //return all used available cars\r\n      if (req.query.state === 'used') {\r\n\r\n        const findAllQuery = \"SELECT * FROM cars WHERE status = 'available' AND state = 'used'\";\r\n        try {\r\n          const { rows } = await db.query(findAllQuery);\r\n          return res.status(200).send({ rows });\r\n        } catch (error) {\r\n          return res.status(400).send({ status: 400, error });\r\n        }\r\n\r\n      }\r\n      //return all available Car Ads of specified make (manufacturer)\r\n      if (req.query.manufacturer) {\r\n\r\n        const findAllQuery = `SELECT * FROM cars WHERE status = 'available' AND manufacturer = '${req.query.manufacturer}' `;\r\n        try {\r\n          const { rows } = await db.query(findAllQuery);\r\n          return res.status(200).send({ status: 200, rows });\r\n        } catch (error) {\r\n          return res.status(400).send({ status: 400, error });\r\n        }\r\n\r\n      }\r\n      //return all available car Ads within a specified price range\r\n      if (req.query.min_price) {\r\n        console.log('price testing')\r\n        const findAllQuery = `SELECT * FROM cars WHERE status = 'available' AND price BETWEEN '${req.query.min_price}' AND '${req.query.max_price}' `;\r\n        //try {\r\n          const { rows } = await db.query(findAllQuery);\r\n          const carRange = rows;\r\n          return res.status(200).send({ status: 200, carRange });\r\n        // } catch (error) {\r\n        //   return res.status(400).send({ status: 400, error });\r\n        // }\r\n\r\n      }\r\n      //Return all available car Ads\r\n      const findAllQuery = \"SELECT * FROM cars WHERE status = 'available'\";\r\n      try {\r\n        const { rows } = await db.query(findAllQuery);\r\n        if(rows === []){\r\n          return res.status(200).send({ status: 201, message: 'No available Car Ads' });\r\n        }\r\n        return res.status(200).send({ status: 200, rows });\r\n      } catch (error) {\r\n        return res.status(400).send({ status: 400, error });\r\n      }\r\n\r\n    }\r\n    //return all car Ads with specific body type\r\n    if (req.query.body_type) {\r\n\r\n      const findAllQuery = `SELECT * FROM cars WHERE  body_type = '${req.query.body_type}'`;\r\n      try {\r\n        const { rows } = await db.query(findAllQuery);\r\n        return res.status(200).send({status: 200, rows });\r\n      } catch (error) {\r\n        return res.status(400).send({ status: 400, error: `Cannot find car of ${req.query.body_type} body type` });\r\n      }\r\n\r\n    }\r\n    const findAllQuery = 'SELECT * FROM cars';\r\n    try {\r\n      const { rows } = await db.query(findAllQuery);\r\n      return res.status(200).send({ status: 200, rows });\r\n    } catch (error) {\r\n      return res.status(400).send({ status: 400, error });\r\n    }\r\n  },\r\n  /**\r\n   * Mark a Car Ad as sold\r\n   * @param {object} req \r\n   * @param {object} res \r\n   * @returns {object} updated car\r\n   */\r\n  async getUpdateStatus(req, res) {\r\n    const findOneQuery = 'SELECT * FROM cars WHERE id=$1';\r\n    const updateOneQuery = `UPDATE cars\r\n      SET status=$1, modified_date=$2\r\n      WHERE id=$3 returning *`;\r\n    try {\r\n      req.params.id = req.params.carId;\r\n      const { rows } = await db.query(findOneQuery, [req.params.id]);\r\n      if (!rows[0]) {\r\n        return res.status(404).send({ status: 404, error: 'car Ad not found' });\r\n      }\r\n      else if (rows[0].status === 'sold') {\r\n        return res.status(404).send({ status: 404, error: `Cannot update. car Ad is already ${rows[0].status}` });\r\n      }\r\n\r\n      const values = [\r\n        req.body.status,\r\n        moment(new Date()),\r\n        req.params.id\r\n      ];\r\n      const response = await db.query(updateOneQuery, values);\r\n      const modifiedAdStatus = response.rows[0];\r\n      return res.status(200).send({ status: 200, modifiedAdStatus });\r\n    } catch (err) {\r\n      return res.status(400).send({ status: 400, err });\r\n    }\r\n  },\r\n  /*\r\n    * Delete A Car\r\n    * @param {object} req \r\n    * @param {object} res \r\n    * @returns {void} return statuc code 204 \r\n    */\r\n  async delete(req, res) {\r\n    const deleteQuery = 'DELETE FROM cars WHERE id=$1 returning *';\r\n    try {\r\n      req.params.id = req.params.carId;\r\n      const { rows } = await db.query(deleteQuery, [req.params.id]);\r\n    \r\n      if (!rows[0]) {\r\n        return res.status(404).send({status: 404, error: 'Car Ad not found to delete' });\r\n      }\r\n      \r\n      return res.status(204).send({status: 204, message: \"Car Ad successfully deleted\" });\r\n     }catch(error) {\r\n       return res.status(400).send({ status: 400, error });\r\n     }\r\n   }\r\n}\r\n\r\nexport default Car;\r\n"],"file":"carController.js"}